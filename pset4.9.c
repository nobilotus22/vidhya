#include<stdio.h>
#include<conio.h>
void main()
{
char z[100];
int count=0,count1=0,count2=0,count3=0,count4=0,count5=0,i,n;
int a,b,c,d,e,f;
clrscr();
a='{';
b='}';
c='[';
d=']';
e='(';
f=')';
scanf("%d",&n);
for(i=0;i<n;i++)
{
scanf("%s",&z[i]);
}
if(n%2==0)
{
for(i=0;i<n;i++)
{
if((z[i]==a)||(z[i]==b))
{
if(z[i]==a)
{
count++;
}
else
{
count1++;
}
}
if((z[i]==c)||(z[i]==d))
{
if(z[i]==c)
{
count2++;
}
else
{
count3++;
}
}
if((z[i]==e)||(z[i]==f))
{
if(z[i]==e)
{
count4++;
}
else
{
count5++;
}
}
}
if((count==count1)&&(count2==count3)&&(count4==count5))
{
printf("balanced");
}
else
{
printf("not");
}
}
else
{
printf("not");
}
getch();
}

